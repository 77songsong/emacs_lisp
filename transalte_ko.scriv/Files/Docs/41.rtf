{\rtf1\ansi\ansicpg949\cocoartf1187\cocoasubrtf340
{\fonttbl\f0\fnil\fcharset129 AppleSDGothicNeo-Regular;}
{\colortbl;\red255\green255\blue255;}
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\fi360\sl288\slmult1\pardirnatural

\f0\fs28 \cf0 \
@node defun, Install, Primitive Functions, Writing Defuns\
@comment  node-name,  next,  previous,  up\
@section The @code\{defun\} Special Form\
@findex defun\
@cindex Special form of @code\{defun\}\
\
@cindex @samp\{function definition\} defined\
In Lisp, a symbol such as @code\{mark-whole-buffer\} has code attached to\
it that tells the computer what to do when the function is called.\
This code is called the @dfn\{function definition\} and is created by\
evaluating a Lisp expression that starts with the symbol @code\{defun\}\
(which is an abbreviation for @emph\{define function\}).  Because\
@code\{defun\} does not evaluate its arguments in the usual way, it is\
called a @dfn\{special form\}.\
\
In subsequent sections, we will look at function definitions from the\
Emacs source code, such as @code\{mark-whole-buffer\}.  In this section,\
we will describe a simple function definition so you can see how it\
looks.  This function definition uses arithmetic because it makes for a\
simple example.  Some people dislike examples using arithmetic; however,\
if you are such a person, do not despair.  Hardly any of the code we\
will study in the remainder of this introduction involves arithmetic or\
mathematics.  The examples mostly involve text in one way or another.\
\
A function definition has up to five parts following the word\
@code\{defun\}:\
\
@enumerate\
@item\
The name of the symbol to which the function definition should be\
attached.\
\
@item\
A list of the arguments that will be passed to the function.  If no\
arguments will be passed to the function, this is an empty list,\
@code\{()\}.\
\
@item\
Documentation describing the function.  (Technically optional, but\
strongly recommended.)\
\
@item\
Optionally, an expression to make the function interactive so you can\
use it by typing @kbd\{M-x\} and then the name of the function; or by\
typing an appropriate key or keychord.\
\
@cindex @samp\{body\} defined\
@item\
The code that instructs the computer what to do: the @dfn\{body\} of the\
function definition.\
@end enumerate\
\
It is helpful to think of the five parts of a function definition as\
being organized in a template, with slots for each part:\
\
@smallexample\
@group\
(defun @var\{function-name\} (@var\{arguments\}@dots\{\})\
  "@var\{optional-documentation\}@dots\{\}"\
  (interactive @var\{argument-passing-info\})     ; @r\{optional\}\
  @var\{body\}@dots\{\})\
@end group\
@end smallexample\
\
As an example, here is the code for a function that multiplies its\
argument by 7.  (This example is not interactive.  @xref\{Interactive,\
, Making a Function Interactive\}, for that information.)\
\
@smallexample\
@group\
(defun multiply-by-seven (number)\
  "Multiply NUMBER by seven."\
  (* 7 number))\
@end group\
@end smallexample\
\
This definition begins with a parenthesis and the symbol @code\{defun\},\
followed by the name of the function.\
\
@cindex @samp\{argument list\} defined\
The name of the function is followed by a list that contains the\
arguments that will be passed to the function.  This list is called\
the @dfn\{argument list\}.  In this example, the list has only one\
element, the symbol, @code\{number\}.  When the function is used, the\
symbol will be bound to the value that is used as the argument to the\
function.\
\
Instead of choosing the word @code\{number\} for the name of the argument,\
I could have picked any other name.  For example, I could have chosen\
the word @code\{multiplicand\}.  I picked the word `number' because it\
tells what kind of value is intended for this slot; but I could just as\
well have chosen the word `multiplicand' to indicate the role that the\
value placed in this slot will play in the workings of the function.  I\
could have called it @code\{foogle\}, but that would have been a bad\
choice because it would not tell humans what it means.  The choice of\
name is up to the programmer and should be chosen to make the meaning of\
the function clear.\
\
Indeed, you can choose any name you wish for a symbol in an argument\
list, even the name of a symbol used in some other function: the name\
you use in an argument list is private to that particular definition.\
In that definition, the name refers to a different entity than any use\
of the same name outside the function definition.  Suppose you have a\
nick-name `Shorty' in your family; when your family members refer to\
`Shorty', they mean you.  But outside your family, in a movie, for\
example, the name `Shorty' refers to someone else.  Because a name in an\
argument list is private to the function definition, you can change the\
value of such a symbol inside the body of a function without changing\
its value outside the function.  The effect is similar to that produced\
by a @code\{let\} expression.  (@xref\{let, , @code\{let\}\}.)\
\
@ignore\
Note also that we discuss the word `number' in two different ways: as a\
symbol that appears in the code, and as the name of something that will\
be replaced by a something else during the evaluation of the function.\
In the first case, @code\{number\} is a symbol, not a number; it happens\
that within the function, it is a variable who value is the number in\
question, but our primary interest in it is as a symbol.  On the other\
hand, when we are talking about the function, our interest is that we\
will substitute a number for the word @var\{number\}.  To keep this\
distinction clear, we use different typography for the two\
circumstances.  When we talk about this function, or about how it works,\
we refer to this number by writing @var\{number\}.  In the function\
itself, we refer to it by writing @code\{number\}.\
@end ignore\
\
The argument list is followed by the documentation string that\
describes the function.  This is what you see when you type\
@w\{@kbd\{C-h f\}\} and the name of a function.  Incidentally, when you\
write a documentation string like this, you should make the first line\
a complete sentence since some commands, such as @code\{apropos\}, print\
only the first line of a multi-line documentation string.  Also, you\
should not indent the second line of a documentation string, if you\
have one, because that looks odd when you use @kbd\{C-h f\}\
(@code\{describe-function\}).  The documentation string is optional, but\
it is so useful, it should be included in almost every function you\
write.\
\
@findex * @r\{(multiplication)\}\
The third line of the example consists of the body of the function\
definition.  (Most functions' definitions, of course, are longer than\
this.)  In this function, the body is the list, @code\{(* 7 number)\}, which\
says to multiply the value of @var\{number\} by 7.  (In Emacs Lisp,\
@code\{*\} is the function for multiplication, just as @code\{+\} is the\
function for addition.)\
\
When you use the @code\{multiply-by-seven\} function, the argument\
@code\{number\} evaluates to the actual number you want used.  Here is an\
example that shows how @code\{multiply-by-seven\} is used; but don't try\
to evaluate this yet!\
\
@smallexample\
(multiply-by-seven 3)\
@end smallexample\
\
@noindent\
The symbol @code\{number\}, specified in the function definition in the\
next section, is given or ``bound to'' the value 3 in the actual use of\
the function.  Note that although @code\{number\} was inside parentheses\
in the function definition, the argument passed to the\
@code\{multiply-by-seven\} function is not in parentheses.  The\
parentheses are written in the function definition so the computer can\
figure out where the argument list ends and the rest of the function\
definition begins.\
\
If you evaluate this example, you are likely to get an error message.\
(Go ahead, try it!)  This is because we have written the function\
definition, but not yet told the computer about the definition---we have\
not yet installed (or `loaded') the function definition in Emacs.\
Installing a function is the process that tells the Lisp interpreter the\
definition of the function.  Installation is described in the next\
section.}